<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tiệm Đấu Giá - Bất Ngờ</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h1>Tiệm Đấu Giá - Bất Ngờ</h1>
  <p>Nhấn nút bên dưới để thực hiện giao dịch Pi thử nghiệm.</p>
  <button onclick="makePayment()">Thanh toán thử</button>

  <script>
    // ✅ Bắt buộc: khởi tạo SDK
    window.Pi.init({ version: "2.0" });

    function makePayment() {
      window.Pi.createPayment({
        amount: 0.001,
        memo: "Test Pi Payment",
        metadata: { type: "test" }
      }, {
        onReadyForServerApproval: function (paymentId) {
          console.log("✔️ Chờ server duyệt:", paymentId);
        },
        onReadyForServerCompletion: function (paymentId, txid) {
          console.log("✔️ Giao dịch hoàn tất:", paymentId, txid);
        },
        onCancel: function (paymentId) {
          alert("❌ Giao dịch bị hủy: " + paymentId);
        },
        onError: function (error, paymentId) {
          alert("❌ Lỗi: " + error + "\nPayment ID: " + paymentId);
        }
      });
    }
  </script>
</body>
</html>
